<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Woordjes Oefenen - Groep 3</title>
  <!-- Tailwind CSS via CDN (handig, geen build-stap nodig) -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-blue-50 min-h-screen flex items-center justify-center">
  <div id="root" class="w-full max-w-md p-4"></div>

  <!-- React via CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- De app zelf (ES‑module, dus moderne browsers nodig) -->
  <script type="module">
    const { useState, useEffect } = React;

    // ⚙️ Basis‑woordenlijst (CITO-frequent woorden groep 3)
    const WORDS = [
      // basislijst
      'bal','pop','pen','kip','kat','maan','vis','boom','raam','auto',
      'huis','deur','beer','boek','doos','stoel','tafel','fles','zon','ster',
      // uitgebreid met extra woordjes
      'fiets','tas','ring','muur','kaas','schaap','neus','hand','teen','oog',
      'ijs','peer','kom','vaas','snoep','tent','beker','jas','rok','broek',
      'taart','doek','klas','goud','zilver','kers','wolf','koek','kaars','hond',
      'sneeuw','regen','wind','rook','bloem','melk','rijst','kaart','bed','thee',
      'suiker','vuur','vaart','lepel','vork','mes','zoon','zus','kroon','muis',
      'slang','appel'
    ];

    const ICONS = {
      bal: '⚽', pop: '🪆', pen: '✏️', kip: '🐔', kat: '🐱', maan: '🌙',
      vis: '🐟', boom: '🌳', raam: '🪟', auto: '🚗',
      huis: '🏠', deur: '🚪', beer: '🐻', boek: '📖', doos: '📦',
      stoel: '🪑', tafel: '🍽️', fles: '🍾', zon: '🌞', ster: '⭐',
      fiets: '🚲', tas: '👜', ring: '💍', muur: '🧱', kaas: '🧀',
      schaap: '🐑', neus: '👃', hand: '✋', teen: '🦶', oog: '👁️',
      ijs: '🧊', peer: '🍐', kom: '🥣', vaas: '🏺', snoep: '🍬',
      tent: '⛺', beker: '🥤', jas: '🧥', rok: '👗', broek: '👖',
      taart: '🍰', doek: '🧣', klas: '🏫', goud: '🥇', zilver: '🥈',
      kers: '🍒', wolf: '🐺', koek: '🍪', kaars: '🕯️', hond: '🐶',
      sneeuw: '❄️', regen: '🌧️', wind: '🌬️', rook: '💨', bloem: '🌸',
      melk: '🥛', rijst: '🍚', kaart: '🗺️', bed: '🛏️', thee: '🍵',
      suiker: '🍭', vuur: '🔥', vaart: '🚤', lepel: '🥄', vork: '🍴',
      mes: '🔪', zoon: '👦', zus: '👧', kroon: '👑', muis: '🐭',
      slang: '🐍', appel: '🍎'
    };

    // Hulpfuncties
    const shuffle = arr => {
      const copy = [...arr];
      for (let i = copy.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [copy[i], copy[j]] = [copy[j], copy[i]];
      }
      return copy;
    };

    let queue = shuffle(WORDS);
    function nextWord(){
      if (queue.length === 0) queue = shuffle(WORDS);
      return queue.pop();
    }

    /**
     * Eén oefening (component)
     * Modes:
     *  - first  ➜ eerste letter invullen
     *  - vowel  ➜ een klinker invullen
     *  - begin  ➜ beginklank (knop) kiezen
     */
    function Exercise({ onDone }){
      const [word, setWord]   = useState(nextWord());
      const [mode]            = useState(['first','vowel','begin'][Math.floor(Math.random()*3)]);
      const [input, setInput] = useState('');
      const [checked, setChecked] = useState(false);
      const [correct, setCorrect] = useState(false);

      function reset(){
        setWord(nextWord());
        setInput('');
        setChecked(false);
        setCorrect(false);
      }

      function handleCheck(){
        if (checked) {               // Na feedback ➜ volgende oefening
          onDone(correct);
          reset();
          return;
        }

        let ok = false;
        if (mode === 'first') {
          ok = input.toLowerCase() === word[0];
        }
        if (mode === 'vowel') {
          const i = [...word].findIndex(ch => 'aeiou'.includes(ch));
          ok = input.toLowerCase() === word[i];
        }
        if (mode === 'begin') {
          ok = input === word[0];
        }
        setCorrect(ok);
        setChecked(true);
      }

      // ✏️ Weergave van het woord per mode in vakjes
      function renderWord(){
        const letters = [...word];
        let hide = -1;
        if (mode === 'first') {
          hide = 0;
        } else if (mode === 'vowel') {
          hide = letters.findIndex(ch => 'aeiou'.includes(ch));
        }
        return React.createElement(
          'div',
          { className: 'flex justify-center space-x-1 text-2xl font-bold' },
          letters.map((ch, idx) =>
            React.createElement(
              'div',
              {
                key: idx,
                className: 'w-8 h-8 border-2 flex items-center justify-center',
              },
              idx === hide ? '' : ch
            )
          )
        );
      }

          return (
            React.createElement('div', { className: 'space-y-4' },
              renderWord(),
          React.createElement('div', {
            className: 'mx-auto w-40 h-40 flex items-center justify-center text-6xl'
          }, ICONS[word] || '❓'),

          // 👉 Invoerveld (alle modes hetzelfde)
          React.createElement('input', {
            className: 'border p-2 w-full text-center text-lg',
            placeholder: 'Typ hier',
            value: input,
            onChange: e => setInput(e.target.value)
          }),

          // 🎉 Feedback (groen/rood)
          checked && React.createElement('div', {
            className: `text-center font-semibold ${correct ? 'text-green-600' : 'text-red-600'}`
          }, correct ? 'Goed gedaan!' : 'Helaas, probeer volgende'),

          // Actieknop
          React.createElement('button', {
            className: 'bg-indigo-600 text-white px-4 py-2 rounded w-full',
            onClick: handleCheck
          }, checked ? 'Volgende' : 'Controleer')
        )
      );
    }

    /**
     * Hoofd‑component: score wordt in localStorage bewaard
     */
    function App(){
      const [score, setScore] = useState(() => {
        const s = localStorage.getItem('score');
        return s ? JSON.parse(s) : { good: 0, total: 0 };
      });

      useEffect(() => {
        localStorage.setItem('score', JSON.stringify(score));
      }, [score]);

      function handleDone(correct){
        setScore(prev => ({ good: prev.good + (correct ? 1 : 0), total: prev.total + 1 }));
      }

      return (
        React.createElement('div', { className: 'bg-white shadow-xl rounded-2xl p-6' },
          React.createElement('h1', { className: 'text-2xl font-bold mb-4 text-center' }, 'Woordjes Oefenen'),
          React.createElement(Exercise, { onDone: handleDone }),
          React.createElement('div', { className: 'mt-6 text-center' },
            React.createElement('p', { className: 'text-sm' }, `Score: ${score.good} / ${score.total}`)
          )
        )
      );
    }

    // 🚀 Start de app
    ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));
  </script>
</body>
</html>
